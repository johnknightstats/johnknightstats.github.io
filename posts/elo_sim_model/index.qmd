---
title: "Building an Elo Simulation Model for Retrospective League Winner Daily Probabilities"
draft: true
image: viz/cond_plots.png
author: "John Knight"
date: 2025-07-11
date-format: "D MMMM YYYY"
description: "Here I show how the model was built"
categories: ["football", "statistics"]
format:
  html:
    title-block-style: none
    css: ../styles.css
execute: 
  echo: false
  eval: true
engine: knitr
editor: source

---

*Here I show how the model was built*

---

I hope you enjoyed my recent article looking at the worst league title collapses in English football history. If not, you can read it [here](https://johnknightstats.com/posts/title_collapses/).

Now I will go into a little more depth on the model I used to simulate scores from Elo ratings. There's a bit of mathematics involved, but nothing too heavy.

As mentioned in the original article, daily Elo Ratings were taken from [Club Elo](http://clubelo.com/). FBRef has all results for the [entire history](https://fbref.com/en/comps/9/history/Premier-League-Seasons) of the English top flight, which is pretty cool. I had to create some mappings to link the FBRef team names to the Club Elo ones. You can find all my code and data files for this project in my [GitHub repo](https://github.com/johnknightstats/elo-league-sims).

Since the Elo ratings only begin in 1940, we will have to ignore results prior to World War 2. Our first task, as always, is to do some data inspection.

I took the decision not to account for varying goal rates in this model, because it adds a fair amount of complexity and I didn't think it would add a huge amount given the task at hand. Nonetheless, it is still interesting to see how the number of goals per game has changed over the last 

::: {.centered-block .max-70}
<img src="viz/goals_pg_seasons.png"/>
:::

::: {.centered-block .max-70}
<img src="viz/home_suprem_seasons.png"/>
:::

::: {.centered-block .max-70}
<img src="viz/elo_mean_seasons.png"/>
:::

::: {.centered-block .max-70}
<img src="viz/elo_deciles.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/elo_gam.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/poisson_v_obs.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/poisson_v_nb_v_obs.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/poisson_v_nb_v_obs_10k.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/cond_plots.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/fav_goals_fitted.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/underdog_cond_plots_dispersion_5.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/underdog_cond_plots_fitted_dispersion.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/underdog_cond_pointmass.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/deciles_new.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/wdl.png"/>
:::
::: {.centered-block .max-70}
<img src="viz/model_v_scores.png"/>
:::


